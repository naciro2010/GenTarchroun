<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Catalogue Mat√©riaux Maroc 2025 - 150+ Prix Actualis√©s | BuilderMaroc</title>
    <meta name="description" content="Catalogue complet 150+ mat√©riaux construction Maroc avec prix 2025 par r√©gion. Ciment, b√©ton, carrelage, menuiseries, isolation. Casablanca, Rabat, Marrakech, Tanger, F√®s, Agadir." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/css/style.css" />
    <script src="../assets/js/materiaux-data.js"></script>
    <style>
      .catalogue-header {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        padding: 2rem;
        border-radius: var(--radius-md);
        margin-bottom: 2rem;
      }

      .catalogue-header h2 {
        color: white;
        margin-bottom: 0.5rem;
      }

      .filter-bar {
        background: var(--surface);
        padding: 1.5rem;
        border-radius: var(--radius-md);
        box-shadow: var(--shadow);
        margin-bottom: 2rem;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 1rem;
        align-items: end;
      }

      .filter-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .filter-group label {
        font-weight: 500;
        font-size: 0.9rem;
      }

      .filter-group select,
      .filter-group input {
        padding: 0.6rem;
        border: 1px solid #ddd;
        border-radius: var(--radius-sm);
        font-family: inherit;
      }

      .category-tabs {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
        margin-bottom: 2rem;
      }

      .category-tab {
        background: var(--surface);
        border: 2px solid var(--surface-alt);
        padding: 0.75rem 1.25rem;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .category-tab:hover {
        border-color: var(--primary);
        background: var(--surface-alt);
      }

      .category-tab.active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
      }

      .materials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
      }

      .material-card {
        background: var(--surface);
        border-radius: var(--radius-md);
        box-shadow: var(--shadow);
        overflow: hidden;
        transition: all 0.2s;
      }

      .material-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 30px rgba(12, 122, 100, 0.2);
      }

      .material-header {
        padding: 1.25rem;
        border-bottom: 2px solid var(--surface-alt);
      }

      .material-header h3 {
        font-size: 1.1rem;
        margin-bottom: 0.5rem;
        color: var(--primary);
      }

      .material-meta {
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .material-prices {
        padding: 1.25rem;
      }

      .price-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--surface-alt);
      }

      .price-row:last-child {
        border-bottom: none;
      }

      .price-city {
        font-size: 0.9rem;
        color: var(--text-muted);
      }

      .price-value {
        font-weight: 600;
        font-size: 1rem;
        color: var(--primary);
      }

      .price-highlight {
        background: linear-gradient(135deg, var(--secondary) 0%, #e08a1f 100%);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.9rem;
      }

      .material-footer {
        padding: 1rem 1.25rem;
        background: var(--surface-alt);
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .material-footer strong {
        color: var(--text);
      }

      .stats-banner {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .stat-card {
        background: var(--surface);
        padding: 1.5rem;
        border-radius: var(--radius-md);
        box-shadow: var(--shadow);
        text-align: center;
      }

      .stat-number {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 0.5rem;
      }

      .stat-label {
        font-size: 0.9rem;
        color: var(--text-muted);
      }

      .no-results {
        text-align: center;
        padding: 3rem;
        color: var(--text-muted);
      }

      .badge-new {
        background: var(--secondary);
        color: white;
        padding: 0.15rem 0.5rem;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 600;
        margin-left: 0.5rem;
      }

      .update-date {
        text-align: center;
        padding: 1rem;
        background: var(--surface-alt);
        border-radius: var(--radius-md);
        margin-bottom: 2rem;
        font-size: 0.9rem;
        color: var(--text-muted);
      }

      .update-date strong {
        color: var(--primary);
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="container navbar">
        <a href="../index.html" class="brand">BuilderMaroc</a>
        <nav class="nav-links">
          <a href="guide-construction.html">Guide A-Z</a>
          <a href="catalogue-materiaux.html" class="active">Mat√©riaux</a>
          <a href="annuaire-professionnels.html">Professionnels</a>
          <a href="simulation.html">Simulateur</a>
          <a href="configurateur-3d.html">Configurateur 3D</a>
        </nav>
        <a class="btn btn-primary" href="simulation.html">Devis Express</a>
      </div>
    </header>

    <main>
      <section class="section banner">
        <div class="container">
          <span class="feature-badge">üöÄ Phase 2 - Base de Donn√©es Compl√®te</span>
          <h1>Catalogue Mat√©riaux de Construction Maroc 2025</h1>
          <p>
            Acc√©dez √† notre base de donn√©es exhaustive de <strong>150+ mat√©riaux</strong> avec prix actualis√©s
            pour 6 r√©gions marocaines. Comparez les tarifs, consultez les fournisseurs locaux,
            et trouvez les meilleurs prix pour votre projet de construction.
          </p>
        </div>
      </section>

      <div class="container">
        <!-- Update Notice -->
        <div class="update-date">
          üìÖ <strong>Derni√®re mise √† jour :</strong> Novembre 2025 |
          üîÑ <strong>Prochaine mise √† jour :</strong> D√©cembre 2025 (mise √† jour hebdomadaire)
        </div>

        <!-- Stats Banner -->
        <div class="stats-banner">
          <div class="stat-card">
            <div class="stat-number" id="total-materials">150+</div>
            <div class="stat-label">Mat√©riaux R√©pertori√©s</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">10</div>
            <div class="stat-label">Cat√©gories Compl√®tes</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">6</div>
            <div class="stat-label">R√©gions Couvertes</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">50+</div>
            <div class="stat-label">Fournisseurs R√©f√©renc√©s</div>
          </div>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar">
          <div class="filter-group">
            <label for="filter-region">üó∫Ô∏è R√©gion</label>
            <select id="filter-region">
              <option value="casa" selected>Casablanca-Settat</option>
              <option value="rabat">Rabat-Sal√©-K√©nitra</option>
              <option value="marrakech">Marrakech-Safi</option>
              <option value="tanger">Tanger-T√©touan</option>
              <option value="fes">F√®s-Mekn√®s</option>
              <option value="agadir">Agadir-Souss-Massa</option>
            </select>
          </div>

          <div class="filter-group">
            <label for="filter-search">üîç Rechercher un mat√©riau</label>
            <input type="text" id="filter-search" placeholder="Ex: ciment, carrelage, fen√™tre..." />
          </div>

          <div class="filter-group">
            <label for="filter-sort">üìä Trier par</label>
            <select id="filter-sort">
              <option value="name">Nom (A-Z)</option>
              <option value="price-asc">Prix Croissant</option>
              <option value="price-desc">Prix D√©croissant</option>
            </select>
          </div>

          <div class="filter-group">
            <button class="btn btn-primary" onclick="resetFilters()" style="width: 100%; margin-top: 1.5rem;">
              üîÑ R√©initialiser
            </button>
          </div>
        </div>

        <!-- Category Tabs -->
        <div class="category-tabs" id="category-tabs"></div>

        <!-- Materials Grid -->
        <div class="materials-grid" id="materials-grid"></div>

        <!-- No Results -->
        <div id="no-results" class="no-results" style="display: none;">
          <h3>üòû Aucun r√©sultat trouv√©</h3>
          <p>Essayez de modifier vos filtres ou votre recherche.</p>
        </div>
      </div>
    </main>

    <footer class="footer">
      <div class="container footer-grid">
        <div>
          <h3>BuilderMaroc</h3>
          <p>Catalogue mat√©riaux construction Maroc. Prix actualis√©s hebdomadairement.</p>
        </div>
        <div>
          <h4>Navigation</h4>
          <ul>
            <li><a href="../index.html">Accueil</a></li>
            <li><a href="guide-construction.html">Guide A-Z</a></li>
            <li><a href="simulation.html">Simulateur</a></li>
          </ul>
        </div>
        <div>
          <h4>Contact</h4>
          <p>contact@buildermaroc.ma<br />Version 0.2.0 - Phase 2</p>
        </div>
      </div>
      <div class="footer-bottom">¬© 2025 BuilderMaroc - Donn√©es mat√©riaux 2025</div>
    </footer>

    <script>
      let currentCategory = 'all';
      let currentRegion = 'casa';
      let currentSearch = '';
      let currentSort = 'name';

      // Initialize
      document.addEventListener('DOMContentLoaded', function() {
        renderCategoryTabs();
        renderMaterials();
        attachEventListeners();
        updateStats();
      });

      function renderCategoryTabs() {
        const tabsContainer = document.getElementById('category-tabs');

        // All tab
        const allTab = document.createElement('button');
        allTab.className = 'category-tab active';
        allTab.innerHTML = 'üì¶ Tous les Mat√©riaux';
        allTab.onclick = () => selectCategory('all');
        tabsContainer.appendChild(allTab);

        // Category tabs
        Object.keys(materiauxDatabase.categories).forEach(catKey => {
          const category = materiauxDatabase.categories[catKey];
          const tab = document.createElement('button');
          tab.className = 'category-tab';
          tab.innerHTML = `${category.icon} ${category.name}`;
          tab.onclick = () => selectCategory(catKey);
          tabsContainer.appendChild(tab);
        });
      }

      function selectCategory(category) {
        currentCategory = category;

        // Update tabs
        document.querySelectorAll('.category-tab').forEach(tab => {
          tab.classList.remove('active');
        });
        event.target.classList.add('active');

        renderMaterials();
      }

      function renderMaterials() {
        const grid = document.getElementById('materials-grid');
        const noResults = document.getElementById('no-results');
        grid.innerHTML = '';

        let allMaterials = [];

        // Collect materials
        if (currentCategory === 'all') {
          Object.values(materiauxDatabase.categories).forEach(cat => {
            cat.items.forEach(item => allMaterials.push({ ...item, categoryName: cat.name }));
          });
        } else {
          const category = materiauxDatabase.categories[currentCategory];
          if (category) {
            category.items.forEach(item => allMaterials.push({ ...item, categoryName: category.name }));
          }
        }

        // Filter by search
        if (currentSearch) {
          allMaterials = allMaterials.filter(mat =>
            mat.name.toLowerCase().includes(currentSearch.toLowerCase()) ||
            mat.categoryName.toLowerCase().includes(currentSearch.toLowerCase())
          );
        }

        // Sort
        allMaterials.sort((a, b) => {
          const priceKey = `prix${currentRegion.charAt(0).toUpperCase() + currentRegion.slice(1)}`;

          if (currentSort === 'price-asc') {
            return a[priceKey] - b[priceKey];
          } else if (currentSort === 'price-desc') {
            return b[priceKey] - a[priceKey];
          } else {
            return a.name.localeCompare(b.name);
          }
        });

        // Render
        if (allMaterials.length === 0) {
          noResults.style.display = 'block';
          return;
        }

        noResults.style.display = 'none';

        allMaterials.forEach(material => {
          const card = createMaterialCard(material);
          grid.appendChild(card);
        });
      }

      function createMaterialCard(material) {
        const card = document.createElement('article');
        card.className = 'material-card';

        const regionPrice = material[`prix${currentRegion.charAt(0).toUpperCase() + currentRegion.slice(1)}`];
        const regionName = materiauxDatabase.regions[currentRegion];

        // Find min and max prices
        const prices = [
          material.prixCasa,
          material.prixRabat,
          material.prixMarrakech,
          material.prixTanger,
          material.prixFes,
          material.prixAgadir
        ];
        const minPrice = Math.min(...prices);
        const maxPrice = Math.max(...prices);

        const isMinPrice = regionPrice === minPrice;

        card.innerHTML = `
          <div class="material-header">
            <h3>${material.name} ${material.norme ? '<span class="badge-new">' + material.norme + '</span>' : ''}</h3>
            <div class="material-meta">
              ${material.categoryName} ‚Ä¢ Unit√©: ${material.unit}
            </div>
          </div>

          <div class="material-prices">
            <div class="price-row">
              <span class="price-city">üìç ${regionName}</span>
              <span class="price-value ${isMinPrice ? 'price-highlight' : ''}">
                ${formatPrice(regionPrice)} MAD
              </span>
            </div>
            <div class="price-row">
              <span class="price-city">üí∞ Fourchette Nationale</span>
              <span class="price-value">${formatPrice(minPrice)} - ${formatPrice(maxPrice)} MAD</span>
            </div>
          </div>

          <div class="material-footer">
            <strong>Fournisseurs:</strong> ${material.fournisseurs.join(', ')}
          </div>
        `;

        return card;
      }

      function formatPrice(price) {
        return new Intl.NumberFormat('fr-MA').format(price);
      }

      function attachEventListeners() {
        document.getElementById('filter-region').addEventListener('change', function() {
          currentRegion = this.value;
          renderMaterials();
        });

        document.getElementById('filter-search').addEventListener('input', function() {
          currentSearch = this.value;
          renderMaterials();
        });

        document.getElementById('filter-sort').addEventListener('change', function() {
          currentSort = this.value;
          renderMaterials();
        });
      }

      function resetFilters() {
        currentCategory = 'all';
        currentRegion = 'casa';
        currentSearch = '';
        currentSort = 'name';

        document.getElementById('filter-region').value = 'casa';
        document.getElementById('filter-search').value = '';
        document.getElementById('filter-sort').value = 'name';

        document.querySelectorAll('.category-tab').forEach((tab, index) => {
          tab.classList.remove('active');
          if (index === 0) tab.classList.add('active');
        });

        renderMaterials();
      }

      function updateStats() {
        let totalCount = 0;
        Object.values(materiauxDatabase.categories).forEach(cat => {
          totalCount += cat.items.length;
        });

        document.getElementById('total-materials').textContent = totalCount + '+';
      }
    </script>

    <!-- Analytics & Mobile Menu Scripts -->
    <script src="../assets/js/analytics.js"></script>
    <script src="../assets/js/mobile-menu.js"></script>
</body>
</html>
